<div class="container">
  <!-- Reset Password Button: Visible only if not hidden -->
  <button mat-raised-button type="button"
          color="primary"
          (click)="onButtonClick()"
          *ngIf="!buttonHidden"
          [disabled]="isProcessing"
          class="reset-button">
    Reset Password
  </button>

  <!-- Dialog Template -->
  <ng-template #dialogTemplate>
    <h2 mat-dialog-title>Reset Your Password</h2>
    <mat-dialog-content>
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onDialogSubmit()" class="dialog-form">
        <mat-form-field appearance="outline" class="full-width login-field">
          <mat-label>Email or Username</mat-label>
          <input matInput formControlName="emailOrUsername" type="text" required />
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="forgotPasswordForm.get('emailOrUsername')?.hasError('required')">
            Email or Username is required.
          </mat-error>
        </mat-form-field>
      </form>
    </mat-dialog-content>
    <mat-dialog-actions align="end">
      <button mat-button (click)="closeDialog()" [disabled]="isProcessing">Cancel</button>
      <button mat-raised-button
              color="primary"
              (click)="onDialogSubmit()"
              [disabled]="forgotPasswordForm.invalid || isProcessing">
        Send Reset Link
      </button>
    </mat-dialog-actions>
  </ng-template>
</div>
